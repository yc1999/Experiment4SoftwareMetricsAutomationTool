<!DOCTYPE html>
<html lang="en" class="loading">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
  <meta name="description"
    content="Convex admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
  <meta name="keywords"
    content="admin template, Convex admin template, dashboard template, flat admin template, responsive admin template, web app">
  <meta name="author" content="PIXINVENT">
  <title>软件度量实验</title>
  <link rel="apple-touch-icon" sizes="60x60" href="app-assets/img/ico/apple-icon-60.png">
  <link rel="apple-touch-icon" sizes="76x76" href="app-assets/img/ico/apple-icon-76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="app-assets/img/ico/apple-icon-120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="app-assets/img/ico/apple-icon-152.png">
  <link rel="shortcut icon" type="image/x-icon" href="app-assets/img/ico/favicon.ico">
  <link rel="shortcut icon" type="image/png" href="app-assets/img/ico/favicon-32.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link
    href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,700,900%7CMontserrat:300,400,500,600,700,800,900"
    rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="app-assets/fonts/feather/style.min.css">
  <link rel="stylesheet" type="text/css" href="app-assets/fonts/simple-line-icons/style.css">
  <link rel="stylesheet" type="text/css" href="app-assets/fonts/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/perfect-scrollbar.min.css">
  <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/prism.min.css">
  <link rel="stylesheet" type="text/css" href="app-assets/css/app.css">
  <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
</head>

<body data-col="2-columns" class=" 2-columns ">
  <!-- ////////////////////////////////////////////////////////////////////////////-->
  <div class="wrapper">


    <div data-active-color="white" data-background-color="crystal-clear" data-image="app-assets/img/sidebar-bg/08.jpg"
      class="app-sidebar">
      <div class="sidebar-header">
        <div class="logo clearfix"><a href="index.html" class="logo-text float-left">
            <span
              class="text align-middle">软件度量实验</span>
          </a><a id="sidebarToggle" href="javascript:;" class="nav-toggle d-none d-sm-none d-md-none d-lg-block"><i
              data-toggle="expanded" class="ft-disc toggle-icon"></i></a><a id="sidebarClose" href="javascript:;"
            class="nav-close d-block d-md-block d-lg-none d-xl-none"><i class="ft-circle"></i></a></div>
      </div>
      <div class="sidebar-content">
        <div class="nav-container">
          <ul id="main-menu-navigation" data-menu="menu-navigation" class="navigation navigation-main">
            <li><a href="index.html" ><i class="icon-equalizer"></i>首页</a>
            </li>
            <li><a href="FPMetrics.html"><i class="icon-speedometer"></i>功能点度量</a>
            </li>
            <li><a href="UCPMetrics.html"><i class="icon-grid"></i>用例点度量</a>
            </li>
            <li ><a href="VG.html" ><i class="icon-puzzle"></i>圈复杂度度量</a>
            </li>
            <li  class="active"><a href="CKMetrics.html" ><i class="icon-pie-chart"></i>面向对象CK度量</a>
            </li>
            <li><a href="LKMetrics.html"><i class="icon-bar-chart"></i>面向对象LK度量</a>
            </li>
            <li><a href="countCode.html" ><i class="icon-support"></i>代码行度量</a>
            </li>
        </ul>
        </div>
      </div>
      <div class="sidebar-background"></div>
    </div>

    <div class="main-panel">
      <div class="main-content">
        <div class="content-wrapper">
          <div class="container-fluid">

            <!-- Basic File Browser start -->
            <section class="file-browser">
              <div class="row">
                <div class="col-md-12">
                  <div class="card">
                    <div class="card-header">
                      <div class="card-title-wrap bar-danger">
                        <h4 class="card-title mb-0">面向对象CK度量方法</h4>
                      </div>
                    </div>
                    <div class="card-body">
                      <div class="card-block">
                        <form class="form">
                          <div class="form-body">
                            <div class="row">
                              <div class="col-lg-11 col-md-11">
                                <div class="input-group mb-3">
                                  <div class="input-group-prepend">
                                    <span class="input-group-text">上传文件</span>
                                  </div>
                                  <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="inputFile">
                                    <label class="custom-file-label" for="inputGroupFile01" id="fileName">选择文件</label>
                                  </div>
                                </div>
                              </div>
                              <div class="col-lg-1 col-md-1">
                                <a class="btn mr-1 btn-success" id="checkBtn">确定</a>
                              </div>
                            </div>
                          </div>
                      </form>
                      <div id="ckmetrics" style="width: 1500px;height:400px;position:relative; left:-100px" ></div>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          </section>
        </div>
      </div>
    </div>

    <footer class="footer footer-static footer-light">
      <p class="clearfix text-muted text-center px-2"><span>Copyright &copy; 2020 <a
            href="https://www.csu.edu.cn" id="pixinventLink" target="_blank"
            class="text-bold-800 primary darken-2">CSU</a>, All rights reserved. </span></p>
    </footer>

  </div>
  </div>
  <!-- ////////////////////////////////////////////////////////////////////////////-->


  <!-- BEGIN VENDOR JS-->
  <script src="app-assets/vendors/js/core/jquery-3.3.1.min.js"></script>
  <script src="app-assets/vendors/js/core/popper.min.js"></script>
  <script src="app-assets/vendors/js/core/bootstrap.min.js"></script>
  <script src="app-assets/vendors/js/perfect-scrollbar.jquery.min.js"></script>
  <script src="app-assets/vendors/js/prism.min.js"></script>
  <script src="app-assets/vendors/js/jquery.matchHeight-min.js"></script>
  <script src="app-assets/vendors/js/screenfull.min.js"></script>
  <script src="app-assets/vendors/js/pace/pace.min.js"></script>
  <!-- BEGIN VENDOR JS-->
  <!-- BEGIN PAGE VENDOR JS-->
  <!-- END PAGE VENDOR JS-->
  <!-- BEGIN CONVEX JS-->
  <script src="app-assets/js/app-sidebar.js"></script>
  <script src="app-assets/js/notification-sidebar.js"></script>
  <!-- END CONVEX JS-->
  <!-- BEGIN PAGE LEVEL JS-->
  <!-- END PAGE LEVEL JS-->

  <script>
        var data;
        var nameList = new Array();
        var wmcList = new Array();
        var ditList = new Array();
        var nocList = new Array();
        var cboList = new Array();
        var rfcList = new Array();
        var lcomList = new Array();

        $(document).ready(function () {

          $("#inputFile").change(function(){
              $("#fileName").text("已选择文件："+$("#inputFile")[0].files[0].name);
              var reader = new FileReader();
                reader.readAsText($("#inputFile")[0].files[0], "UTF-8");//读取文件 
                reader.onload = function(evt){ //读取完文件之后会回来这里
                    data =  evt.target.result;
                }
          });

            $("#checkBtn").click(function () {
                $.ajax({
                    url: "http://127.0.0.1:8080/CKMetrics",
                    type:'post',
                    async: false,//使用同步的方式,true为异步方式
                    processData: false,
                    data: data,
                    contentType:"application/xml",
                    success:function(res){
                        $(res).find("result").each(function(i){
                            nameList.push($(this).children("name").text());
                            wmcList.push($(this).children("wmc").text());
                            ditList.push($(this).children("dit").text());
                            nocList.push($(this).children("noc").text());
                            cboList.push($(this).children("cbo").text());
                            rfcList.push($(this).children("rfc").text());
                            lcomList.push($(this).children("lcom").text());
                        })

                        console.log(nameList)

                        // 基于准备好的dom，初始化echarts实例
                        var myChart = echarts.init(document.getElementById('ckmetrics'),'light');
                        
                        // 指定图表的配置项和数据
                        var option = {
                            title: {
                                text: '面向对象CK度量方法',
                                x:'center',
                                y:'top'
                            },
                            tooltip: {},
                            legend: {
                                data:['WMC','DIT','NOC','CBO','RFC','LCOM'],
                                x:'center',
                                y:'bottom'
                            },
                            xAxis: [{
                                data: nameList,
                                axisLabel:{
    		                        interval: 0,
                                    textStyle: {
                                        fontSize: 12,
                                        fontWeight: 'bolder',
                                        color: '#333'          // 主标题文字颜色
                                    },
                            	}
                            }],
                            yAxis: {},
                            series: [
                                {
                                    name: 'WMC',
                                    label: {
                                        show: true, // 开启显示
                                        rotate: 0, // 旋转70度
                                        position: 'top', // 在上方显示
                                        distance: 10, // 距离图形元素的距离。当 position 为字符描述值（如 'top'、'insideRight'）时候有效。
                                        verticalAlign: 'middle',
                                        textStyle: { // 数值样式
                                            color: 'black',
                                            fontWeight: 'bolder',
                                            fontSize: 12
                                        }
                                    },
                                    type: 'bar',
                                    data: wmcList
                                },
                                {
                                    name: 'DIT',
                                    label: {
                                        show: true, // 开启显示
                                        rotate: 0, // 旋转70度
                                        position: 'top', // 在上方显示
                                        distance: 10, // 距离图形元素的距离。当 position 为字符描述值（如 'top'、'insideRight'）时候有效。
                                        verticalAlign: 'middle',
                                        textStyle: { // 数值样式
                                            color: 'black',
                                            fontWeight: 'bolder',
                                            fontSize: 12
                                        }
                                    },
                                    type: 'bar',
                                    data: ditList
                                },
                                {
                                    name: 'NOC',
                                    label: {
                                        show: true, // 开启显示
                                        rotate: 0, // 旋转70度
                                        position: 'top', // 在上方显示
                                        distance: 10, // 距离图形元素的距离。当 position 为字符描述值（如 'top'、'insideRight'）时候有效。
                                        verticalAlign: 'middle',
                                        textStyle: { // 数值样式
                                            color: 'black',
                                            fontWeight: 'bolder',
                                            fontSize: 12
                                        }
                                    },
                                    type: 'bar',
                                    data: nocList
                                },
                                {
                                    name: 'CBO',
                                    label: {
                                        show: true, // 开启显示
                                        rotate: 0, // 旋转70度
                                        position: 'top', // 在上方显示
                                        distance: 10, // 距离图形元素的距离。当 position 为字符描述值（如 'top'、'insideRight'）时候有效。
                                        verticalAlign: 'middle',
                                        textStyle: { // 数值样式
                                            color: 'black',
                                            fontWeight: 'bolder',
                                            fontSize: 12
                                        }
                                    },
                                    type: 'bar',
                                    data: cboList
                                },
                                {
                                    name: 'RFC',
                                    label: {
                                        show: true, // 开启显示
                                        rotate: 0, // 旋转70度
                                        position: 'top', // 在上方显示
                                        distance: 10, // 距离图形元素的距离。当 position 为字符描述值（如 'top'、'insideRight'）时候有效。
                                        verticalAlign: 'middle',
                                        textStyle: { // 数值样式
                                            color: 'black',
                                            fontWeight: 'bolder',
                                            fontSize: 12
                                        }
                                    },
                                    type: 'bar',
                                    data: rfcList
                                },
                                {
                                    name: 'LCOM',
                                    label: {
                                        show: true, // 开启显示
                                        rotate: 0, // 旋转70度
                                        position: 'top', // 在上方显示
                                        distance: 10, // 距离图形元素的距离。当 position 为字符描述值（如 'top'、'insideRight'）时候有效。
                                        verticalAlign: 'middle',
                                        textStyle: { // 数值样式
                                            color: 'black',
                                            fontWeight: 'bolder',
                                            fontSize: 12
                                        }
                                    },
                                    type: 'bar',
                                    data: lcomList
                                }
                            
                            ]
                        };

                        // 使用刚指定的配置项和数据显示图表。
                        myChart.setOption(option,true);

                    },
                    error: function(data) {
                        console.log(data)
                    }
                });
                
            });
        });      

  </script>
</body>

</html>